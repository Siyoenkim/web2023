<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>퀴즈 이펙트06</title>

    <link rel="stylesheet" href="css/quiz.css">
    <link rel="stylesheet" href="css/reset.css">
    <link href="https://unpkg.com/pattern.css" rel="stylesheet">

</head>
<body>
    <header id="header">
        <h1><a href="../javascript14.html">Quiz</a> <em>객관식 확인하기(여러문제) 유형</em></h1>
        <ul>
            <li><a href="quizEffect01.html">1</a></li>
            <li><a href="quizEffect02.html">2</a></li>
            <li><a href="quizEffect03.html">3</a></li>
            <li><a href="quizEffect04.html">4</a></li>
            <li><a href="quizEffect05.html">5</a></li>
            <li><a href="quizEffect05_design.html">5-2</a></li>
            <li class="active"><a href="quizEffect06.html">6</a></li>
            <li><a href="quizEffect07.html">7</a></li>
        </ul>
    </header>
    <!-- //header -->

    <main id="main">
        <div class="quiz__wrap">
            <div class="quiz">
                <div class="quiz__header">
                        <h2 class="quiz__title"></h2>
                </div>
                <div class="quiz__main">
                    <!-- <h3></h3> -->
                    <div class="quiz__question"></div>
                    <div class="quiz__view">
                        <div class="dog__wrap">
                             <div class="true">정답🥰</div>
                            <div class="false">오답😩</div>
                            <div class="count"></div>
                            <div class="card-container">
                                <div class="dog">
                                    <div class="head">
                                        <div class="ears"></div>
                                        <div class="face"></div>
                                        <div class="eyes">
                                            <div class="teardrop"></div>
                                        </div>
                                        <div class="nose"></div>
                                        <div class="mouth">
                                            <div class="tongue"></div>
                                        </div>
                                        <div class="chin"></div>
                                    </div>
                                    <div class="body">
                                        <div class="tail"></div>
                                        <div class="legs"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz__choice">
                        <!-- <label for="choice1">
                            <input type="radio" id="choice1" name="choice" value="1">
                            <span></span>
                        </label>
                        <label for="choice2">
                            <input type="radio" id="choice2" name="choice" value="2">
                            <span></span>
                        </label>
                        <label for="choice3">
                            <input type="radio" id="choice3" name="choice" value="3">
                            <span></span>
                        </label>
                        <label for="choice4">
                            <input type="radio" id="choice4" name="choice" value="4">
                            <span></span>
                        </label> -->
                    </div>
                    <div class="quiz__answer">
                        <button class="next">다음 문제</button>
                    </div>
                    <div class="quiz__desc"></div>
                </div>
            </div>
        </div>
    </main>
    <!-- //main -->

    <footer id="footer">
        <a href="mailto:dripidea77@gmail.com">dripidea77@gmail.com</a>
    </footer>
    <!-- //footer -->
    
    <script>
       // 문제 정보
        const quizInfo = [
            {
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080201",
                infoQuestion : "다음 논리회로에서 출력 f의 값은?  <img style ='width:200px' src='../assets/data img/image_01.jpg' alt='image_01.jpg'>",
                infoChoice : ["-1", "0", "1/2", "1"],
                infoAnswer : "1",
                infoDesc : "1 AND 1 = 1<br>1 AND 0 = 0<br>1 OR 0 = 1이므로 최종 출력은 1그리고 게이트 문제에서 출력은 무조건 0 아니면 1입니다. 1/2 또는 -1, -2 등은 답이 될수 없습니다."
            },{
                infoType : "정보처리기능사",    
                infoTime : "2008년 2회",
                infoNumber : "20080202",
                infoQuestion : "JK 플립플롭(Flip Flop)에서 보수가 출력되기 위한 J, K의 입력 상태는?",
                infoChoice : ["J = 1, K = 0", "J = 0, K = 1", "J = 1, K = 1","J = 0, K = 0"],
                infoAnswer : "J = 0, K = 0",
                infoDesc : "jk플리플롭에서 보수가 되기 위해서는 둘다 입력이 1이어야 합니다."
            },{
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080203",
                infoQuestion : "명령 레지스터(Instruction Register), 부호기, 번지 해독기, 제어 계수기 등과 관계있는 장치는?",
                infoChoice : ["제어 장치", "연산 장치", "입력 장치", "기억 장치"],
                infoAnswer : "제어 장치",
                infoDesc : "문제에서 제어 계수기라고 하여 제어와 관련되었음을 암시합니다."
            },{
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080205",
                infoQuestion : "명령어의 구성이 연산자부가 3Bit, 주소부는 5bit로 되어 있을 때, 이 명령어를 사용하는 컴퓨터는 최대 몇 가지의 동작이 가능한가?",
                infoChoice : ["256", "16", "8", "32"],
                infoAnswer : "8",
                infoDesc : "명령어 = 명령어 코드부 + 명령어 주소부<br>Instruction = Op_Code + Operand<br>실행 가능한 명령어 갯수는 명령어 코드부의 길이에 영향을 받으므로<br>연산자부 3비트의 영향을 받습니다 2의 3승은 8이므로 8개의 명령어 사용이 가능합니다."
            },{
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080206",
                infoQuestion : "8진수 234를 16진수로 바르게 표현한 것은?",
                infoChoice : ["(9C)16","(AD)16","(11B)16","(BC)16"],
                infoAnswer : "(9C)16",
                infoDesc : "우선 3자리씩 확장하여 2진수로 변환한 다음 4자리씩 끊어서 읽어 줍니다."
            },{
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080207",
                infoQuestion : "반가산기(Half-Adder)의 논리회로도에서 자리올림이 발생하는 회로는?",
                infoChoice : ["OR","NOT","Exclusive OR","AND"],
                infoAnswer : "Exclusive OR",
                infoDesc : "반가산기 구성<br>S = A XOR B<br>C = A * B"
            },{
                infoType : "정보처리기능사",
                infoTime : "2008년 2회",
                infoNumber : "20080208",
                infoQuestion : "중앙처리장치의 제어 부분에 의해서 해독되어 현재 실행중인 명령어를 기억하는 레지스터는?",
                infoChoice : ["PC(Program Counter)","IR(Instruction Register)","MAR(Memory Address Register)","MBR(Memory Buffer Register)"],
                infoAnswer : "IR(Instruction Register)",
                infoDesc : "IR : 명령어레지스터(명령어를 읽어서 저장)"
            },
        ];

        //선택자
        const quizWrap = document.querySelector(".quiz__wrap");
        const quizTitle = quizWrap.querySelector(".quiz__title");
        const quizQuestion = quizWrap.querySelector(".quiz__question");
        const quizChoice = quizWrap.querySelector(".quiz__choice");
        const dogWrap = quizWrap.querySelector(".dog__wrap");
        const dogWrapCount = quizWrap.querySelector(".dog__wrap .count");
        const quizNext = quizWrap.querySelector(".quiz__answer .next");
        const quizDesc = quizWrap.querySelector(".quiz__desc");
        const quizAnswer = quizWrap.querySelector(".quiz__answer");
        // const dogHeader = quizWrap.querySelector(".quiz__main h3")

        let quizCount = 0;
        let quizScore = 0;
        
        // quizTitle.innerHTML = quizInfo[0].infoType; 정보처리 기능사 나오게 하기

        //문제출력
        const updateQuiz = (index) =>{
            // let dogHeaderTag = `
            //     ${quizInfo.length - quizCount} 문제 남았습니다. 
            // `;
          
            let typeTag = `
                <span>${quizInfo[index].infoType}</span>
                <em>${quizInfo[index].infoTime}</em>
                `;
            let questionTag = `
                <em>${index+1}</em>.
                <span>${quizInfo[index].infoQuestion}</span>
            `;

            let choiceTag = `
            <label for="choice1">
                <input type="radio" id="choice1" name="choice" value="1">
                <span>${quizInfo[index].infoChoice[0]}</span>
            </label>
            <label for="choice2">
                <input type="radio" id="choice2" name="choice" value="2">
                <span>${quizInfo[index].infoChoice[1]}</span>
            </label>
            <label for="choice3">
                <input type="radio" id="choice3" name="choice" value="3">
                <span>${quizInfo[index].infoChoice[2]}</span>
            </label>
            <label for="choice4">
                <input type="radio" id="choice4" name="choice" value="4">
                <span>${quizInfo[index].infoChoice[3]}</span>
            </label>
            `;

            let descTag = `
                정답은 ${quizInfo[index].infoAnswer}입니다.
                ${quizInfo[index].infoDesc}
            `;

            quizTitle.innerHTML = typeTag;
            quizQuestion.innerHTML = questionTag;
            quizChoice.innerHTML = choiceTag;
            quizDesc.innerHTML = descTag;
            // dogHeader.innerHTML = dogHeaderTag;

            let quizLength = quizInfo.length - quizCount; // 값을 제대로 구했는지를 알 수 없기 때문에 항상 콘솔로그로 확인 해야한다. clg(quizinfo.length);
            dogWrapCount.innerHTML = "총 " + quizInfo.length + "문제 중에 " + ( quizLength-1 ) + "문제가 남았습니다.";
            //1. 5문제 중에 3문제가 남았습니다.
            // 5문제를 먼저 변수화 시켜준 뒤에 "문제 중에 n문제 남았습니다"를 변수화
            //quizcount는 문제 번호를 의미한다.

            //보기 선택자
            const quizChoiceSpan = quizWrap.querySelectorAll(".quiz__choice span");
            const quizChoiceInput = quizWrap.querySelectorAll(".quiz__choice input");

            // quizChoiceSpan.forEach((span, num) => {
            //     span.setAttribute("onclick", "choiceSelected(this)");
            // });

            for(let i=0; i<quizChoiceSpan.length; i++){
                quizChoiceSpan[i].setAttribute("onclick", "choiceSelected(this)");
                // quizChoiceInput.disabled = "true";
            }

            // 다음 버튼 숨기기 해설
            quizAnswer.style.display = "none";
            quizDesc.style.display = "none";
            
        };

        updateQuiz(quizCount);

        //객관식 선택
        function choiceSelected(answer){
            let userAnswer = answer.textContent;                //사용자 정답
            let currentAnswer = quizInfo[quizCount].infoAnswer; // 문제 정답

            if(userAnswer == currentAnswer){
                console.log("정답");
                dogWrap.classList.add("like");
                quizScore++;
            }else{
                console.log("오답");
                dogWrap.classList.add("dislike");
            }

            //다음 버튼, 해설 나타나기
            quizAnswer.style.display = "block";
            quizDesc.style.display = "block";

            let countLast = Math.ceil((quizScore/quizInfo.length)*100); // 점수내기
            let countResult = (countLast > 60) ? "합격" : "불합격";
            

            //마지막 문제일 때
            if(quizCount == quizInfo.length - 1){
                quizAnswer.style.display = "none";
                dogWrapCount.innerHTML = "문제를 다 풀었습니다. 축하합니다!<br> 총" + quizScore + "문제를 맞추었습니다. 점수는 " + countLast + "점입니다. " + countResult + "입니다."
            }

            // if(quizInfo.length - quizCount == 1){
            //     alert(quizScore + "개 맞았습니다." + Math.ceil((quizScore / quizInfo.length) * 100) + "점 입니다.");
            // };

        };

        //정답 확인
        quizNext.addEventListener("click", () => {
            quizCount++;
            updateQuiz(quizCount);

            dogWrap.classList.remove("like", "dislike");
        });

        // 다 풀었을 때 점수 나오게 하기
        // 블로그 6번
        // 맞힌 개수 틀린 개수 표기
        // 총 몇 문제 중에서 몇 문제 풀고 있는지. 
    </script>
</body>
</html>